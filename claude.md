# AI 교사 업무 비서 프로젝트 가이드라인

## 📖 프로젝트 개요 (Overview)

- **프로젝트명:** AI 교사 업무 비서
- **목표:** Streamlit을 사용하여 교사의 반복적인 행정 업무(기안문, 생기부, 가정통신문 작성 등)를 자동화하고, 학교 정보 검색 및 급식표 조회 등의 편의 기능을 제공하는 웹 애플리케이션 개발
- **핵심 기술 스택:** Python, Streamlit, LangChain, OpenAI API, Pandas

## 📁 파일 구조 (File Structure)

### 핵심 파일
- **`app.py`**: 메인 애플리케이션 파일. 각 기능 탭을 생성하고, 모듈화된 탭 파일을 import하여 연결하는 역할만 수행
- **`*_tab.py`**: 각 탭의 UI와 프론트엔드 로직을 담당하는 모듈 파일
  - `giamun_tab.py` - 기안문 작성 탭
  - `saengibu_tab.py` - 생기부 기록 탭
  - `info_search_tab.py` - 정보 검색 탭
- **`utils.py`**: 여러 파일에서 공통으로 사용되는 핵심 백엔드 함수들을 포함 (RAG 시스템 초기화, API 호출, 데이터 처리 함수 등)
- **`prompts.py`**: LLM에게 전달할 모든 프롬프트 템플릿을 보관

### 설정 및 데이터 파일
- **`.env`**: 모든 API 키와 비밀 정보를 저장. **절대 Git에 포함되어서는 안 됨**
- **`requirements.txt`**: 프로젝트 실행에 필요한 모든 Python 라이브러리 목록
- **`data/`**: `school_info.csv`와 같은 원본 데이터 파일을 저장하는 디렉토리

### 헬퍼 파일
- **`giamun_helper.py`**: 기안문 작성에 특화된 헬퍼 함수들

## 💻 코딩 스타일 및 규칙 (Coding Style & Rules)

### 개발 환경
- **가상 환경:** 모든 개발 작업은 `doc_env` 가상 환경 내에서 이루어져야 한다
- **실행 명령어:** 앱 실행 시에는 `python -m streamlit run app.py` 명령어를 사용한다

### 코드 구조
- **모듈화:** 하나의 파일이 너무 커지지 않도록, 기능별로 파일을 분리하는 것을 원칙으로 한다
- **`app.py` 간결성:** `app.py`는 최대한 간결하게 유지한다
- **함수 작성:** 재사용 가능한 로직은 반드시 `utils.py`에 별도의 함수로 작성한다

### UI 일관성
- **디자인 통일:** 모든 탭은 일관된 디자인 톤앤매너를 유지한다
- **섹션 구분:** `st.container(border=True)`를 사용하여 섹션을 구분한다
- **스타일 통일:** 헤더와 부제목의 스타일을 통일한다

### AI 모델 통일
- **AI 모델 통일:** 모든 LLM 호출 시에는 반드시 `utils.py`에 정의된 `PRIMARY_MODEL` 변수를 사용한다. 현재 모델은 비용 효율성이 가장 좋은 `gpt-4o-mini`로 고정되어 있다
- **모델 변경:** 프로젝트 전체 모델을 변경하고 싶을 때는 `utils.py`의 `PRIMARY_MODEL` 값만 수정하면 된다
- **하드코딩 금지:** 개별 파일에서 모델명을 하드코딩하는 것을 금지한다

## 🎯 핵심 기능별 가이드라인 (Feature-specific Guidelines)

### RAG 시스템 (`info_search_tab`, `utils.py`)
- **Retriever:** `MultiQueryRetriever`를 사용하여 검색 정확도를 높인다
- **데이터 소스:** CSV의 `question`과 `answer` 컬럼을 합친 전체 텍스트를 사용한다
- **검색 최적화:** 사용자 쿼리를 다각도로 분석하여 관련성 높은 결과를 제공한다

### 생기부 기록 (`saengibu_tab.py`)
- **학생 명단 관리:**
  - 엑셀 파일 업로드/다운로드 기능을 지원해야 한다
  - 엑셀 양식은 '번호', '이름' 컬럼을 포함한다
- **결과 테이블:**
  - 생성 결과 테이블은 입력 화면과 동일한 구조를 유지한다
  - 내용이 없는 학생은 빈 칸으로 표시한다
  - 번호 순서는 원본과 일치시킨다
- **UI 요소:**
  - 모든 결과물에는 '글자/바이트 수' 카운터를 포함한다
  - 복사/수정 버튼을 제공하여 사용자 편의성을 높인다
- **테이블 레이아웃:**
  - 컬럼 너비 비율: 번호(10%), 이름(20%), 평어(70%)
  - CSS를 사용하여 적절한 컬럼 너비를 보장한다

### 기안문 작성 (`giamun_tab.py`, `giamun_helper.py`)
- **공문서 양식 준수:**
  - 최종 결과물은 K-에듀파인 공문서 양식을 엄격하게 준수해야 한다
  - 공식 문서 서식의 모든 요소(제목, 시행일자, 수신처 등)를 정확히 포함한다
- **역할 분리:**
  - **GPT 역할:** 내용 생성에만 관여
  - **Python 코드 역할:** 최종 서식 렌더링 담당
- **서식 렌더링:**
  - '붙임' 항목의 세로줄 정렬은 HTML `<table>`을 사용하여 완벽하게 구현한다
  - 문서 레이아웃이 공식 양식과 정확히 일치하도록 한다

## 🔧 개발 및 운영 규칙

### Git 관리
- **보안:** `.env` 파일은 절대 Git에 포함하지 않는다
- **무시 파일:** `.gitignore`에 환경 변수 파일과 임시 파일들을 포함한다

### 테스트 및 검증
- **기능 테스트:** 새로운 기능 추가 시 기존 기능에 영향을 주지 않는지 확인한다
- **UI 테스트:** 모든 탭에서 일관된 사용자 경험을 제공하는지 검증한다

### 에러 처리
- **사용자 친화적:** 에러 메시지는 사용자가 이해하기 쉽게 작성한다
- **디버깅:** 개발자가 문제를 파악할 수 있는 충분한 로그 정보를 포함한다

---

## ⚡ 핵심 원칙

1. **사용자 중심:** 교사가 실제로 사용하기 편리한 인터페이스 구현
2. **정확성:** 공문서 작성 시 공식 양식을 정확히 준수
3. **효율성:** 반복 작업을 최대한 자동화하여 업무 효율성 극대화
4. **확장성:** 새로운 기능 추가가 용이한 모듈화된 구조 유지
5. **보안:** API 키 등 민감 정보의 안전한 관리

이 가이드라인은 프로젝트의 일관성과 품질을 보장하기 위한 핵심 규칙입니다. 모든 개발 작업은 이 원칙을 준수하여 진행되어야 합니다.